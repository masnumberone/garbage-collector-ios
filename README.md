# Garbage Collector App

Приложение для отправки снимка с камеры устройства на API системы анализа мусорных баков с последующей визуализацией результата анализа.

## Библиотеки
* UIKit
* Foundation
* CoreData
* AVKit

## Основные классы
* `AVCameraService` — сервис для взаимодействия с камерой устройства на основе `AVKit`.
* `CDBinPhotoService` — сервис для хранения снимков (и результатов анализа) на основе `Core Data`.
* `NetworkService` — сервис для работы с API системы анализа мусорных баков.
* `ViewController` — основной вью контроллер. Содежит коллекцию с секцией камеры и секцией снимков.
* `CameraViewController` — вью контроллер для взаимодействия с камерой. Содержит превью камеры, кнопки и превью снимка.
* `PhotoView` — вью для отображения снимка и визуализации результатов анализа. 
* `GalleryStateView` — вью для отображения статуса анализа, результата анализа. Содержит кнопки удаления и повторного анализа снализа.

## Интересное
* Хранение снимков и результатов анализа в `Core Data`.
* Эффект «размытия фона» для экранов камеры и снимков.
* Анимированные кнопки, переход между экранами осуществляется «свайпами».
* Анимация "отправки" и "отмены отправки" снимка.
* Быстрое срабатывание кнопки снимка за счёт использования `sampleBufferDelegate` для `AVCaptureVideoDataOutput`.
* Реализация mock сервера на `Python`.
* Десериализация результата анализа в виде массива значений ([подробнее](#api)).

## Дизайн
Дизайн приложения был разработан в редакторе `Sketch`. Основой UI послужило популярное приложение-виджет для шеринга снимков между друзьями. При разработке приложения был использован `Pixel Perfect` подход. Макет приложения — [Google Drive](https://drive.google.com/file/d/1OKZ-1e8jpJRK4L-uJs9TV89T0V_e-bP3/view?usp=sharing).

## API
Описание API системы анализа мусорных баков — [Google Drive](https://docs.google.com/document/d/1fKcS1dsDmIW5Fo7FFop9WOOyEmCts4-euGtWc2kRgjQ/edit?usp=sharing).
Отдельным требованием было задание IP-адреса сервера для возможности изменения сервера анализа снимков без повторной сборки приложения.

## Python Mock Server
### Запуск

1. Устновите `flask`: 
    ```
    pip3 install flask
    ```
2. Перейдите в папку `server-moc` и запустите `app.py`:
    ```
    python3 app.py
    ```
3. В терминале будет отображен локальный IP адрес сервера:
    ```
    Running on http://192.168.1.101:8080
    ```

## Демо
<p align="left">
  <img src="https://github.com/masnumberone/garbage-collector-ios/assets/95964517/ac8a4a46-8b0c-4dcf-8acf-6c06d59c2068" width="30%"/>
</p
